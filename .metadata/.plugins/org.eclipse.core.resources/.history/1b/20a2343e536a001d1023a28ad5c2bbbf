#include "setup.h"

int gateway_receive_BUF[10];
int pos = 0;

int* HiL_gateway_get_message(){
	MSGQ_obj msg;
	osStatus_t status = osMessageQueueGet(UART_get_Q, &msg, NULL, 10U);
	if (status == osOK){
		pos = (pos+1)%10;
		gateway_receive_BUF[pos] = &typedef struct {                                // object data type
			  uint8_t Buf[32];
			  uint8_t Idx;
			} MSGQ_obj;msg.Buf;
		return &gateway_receive_BUF[pos];
	}
	else{
		return NULL;
	}
}

void HiL_gateway_send_message(int* send){
	MSGQ_obj msg;
	msg = send;
	osMessageQueue(UART_send_Q, &msg, NULL, 0U);
}
